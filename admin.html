<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ê´€ë¦¬ì íŒ¨ë„ - TodoMaster</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="supabase-config.js"></script>
    <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>ğŸ› ï¸</text></svg>">
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap');
        
        * {
            font-family: 'Inter', sans-serif;
            box-sizing: border-box;
        }
        
        .glassmorphism {
            backdrop-filter: blur(10px);
            background: rgba(255, 255, 255, 0.9);
            border: 1px solid rgba(255, 255, 255, 0.2);
        }
        
        .sidebar {
            width: 280px;
            position: fixed;
            left: 0;
            top: 0;
            height: 100vh;
            background: linear-gradient(180deg, #1f2937 0%, #111827 100%);
            color: white;
            overflow-y: auto;
        }
        
        .main-content {
            margin-left: 280px;
            min-height: 100vh;
            background: linear-gradient(135deg, #f8fafc 0%, #e2e8f0 100%);
        }
        
        .nav-item {
            transition: all 0.2s ease;
        }
        
        .nav-item:hover {
            background: rgba(255, 255, 255, 0.1);
            transform: translateX(5px);
        }
        
        .nav-item.active {
            background: linear-gradient(90deg, rgba(59, 130, 246, 0.3) 0%, transparent 100%);
            border-left: 3px solid #3b82f6;
        }
        
        .status-badge {
            display: inline-block;
            padding: 0.25rem 0.75rem;
            border-radius: 9999px;
            font-size: 0.75rem;
            font-weight: 500;
        }
        
        .status-active {
            background: #10b981;
            color: white;
        }
        
        .status-inactive {
            background: #ef4444;
            color: white;
        }
        
        .status-trial {
            background: #f59e0b;
            color: white;
        }
    </style>
</head>
<body>
    <!-- Sidebar -->
    <aside class="sidebar p-6">
        <div class="mb-8">
            <div class="flex items-center gap-3 mb-6">
                <div class="w-10 h-10 rounded-xl bg-gradient-to-br from-blue-500 to-purple-600 flex items-center justify-center">
                    <span class="text-white text-lg font-bold">âœ“</span>
                </div>
                <div>
                    <h1 class="text-xl font-bold">TodoMaster</h1>
                    <p class="text-xs text-gray-400">ê´€ë¦¬ì íŒ¨ë„</p>
                </div>
            </div>
            
            <nav class="space-y-2">
                <a href="#dashboard" class="nav-item active block px-4 py-3 rounded-lg flex items-center gap-3">
                    <span>ğŸ“Š</span>
                    <span>ëŒ€ì‹œë³´ë“œ</span>
                </a>
                <a href="#users" class="nav-item block px-4 py-3 rounded-lg flex items-center gap-3">
                    <span>ğŸ‘¥</span>
                    <span>ì‚¬ìš©ì ê´€ë¦¬</span>
                </a>
                <a href="#subscriptions" class="nav-item block px-4 py-3 rounded-lg flex items-center gap-3">
                    <span>ğŸ’³</span>
                    <span>êµ¬ë… ê´€ë¦¬</span>
                </a>
                <a href="#analytics" class="nav-item block px-4 py-3 rounded-lg flex items-center gap-3">
                    <span>ğŸ“ˆ</span>
                    <span>ë¶„ì„</span>
                </a>
                <a href="#feedback" class="nav-item block px-4 py-3 rounded-lg flex items-center gap-3">
                    <span>ğŸ’¬</span>
                    <span>í”¼ë“œë°±</span>
                </a>
                <a href="#settings" class="nav-item block px-4 py-3 rounded-lg flex items-center gap-3">
                    <span>âš™ï¸</span>
                    <span>ì„¤ì •</span>
                </a>
            </nav>
        </div>
        
        <div class="border-t border-gray-700 pt-6">
            <div class="flex items-center gap-3 mb-4">
                <div id="admin-avatar" class="w-10 h-10 rounded-full bg-gradient-to-br from-purple-500 to-pink-600 flex items-center justify-center">
                    <span>A</span>
                </div>
                <div>
                    <div id="admin-name" class="text-sm font-medium">ê´€ë¦¬ì</div>
                    <div id="admin-email" class="text-xs text-gray-400">admin@todomaster.com</div>
                </div>
            </div>
            <button onclick="signOut()" class="w-full px-4 py-2 bg-red-600 hover:bg-red-700 text-white rounded-lg transition-colors">
                ë¡œê·¸ì•„ì›ƒ
            </button>
        </div>
    </aside>

    <!-- Main Content -->
    <main class="main-content p-8">
        <!-- Dashboard Section -->
        <section id="dashboard-section" class="section">
            <h2 class="text-3xl font-bold text-gray-800 mb-8">ëŒ€ì‹œë³´ë“œ</h2>
            
            <!-- Stats Grid -->
            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8">
                <div class="glassmorphism rounded-2xl p-6">
                    <div class="flex items-center justify-between mb-4">
                        <div class="w-12 h-12 rounded-full bg-blue-100 flex items-center justify-center">
                            <span class="text-2xl">ğŸ‘¥</span>
                        </div>
                    </div>
                    <div class="text-3xl font-bold text-gray-800" id="total-users">0</div>
                    <div class="text-sm text-gray-600 mt-1">ì „ì²´ ì‚¬ìš©ì</div>
                    <div class="text-xs text-green-600 mt-2">+12% ì´ë²ˆ ë‹¬</div>
                </div>

                <div class="glassmorphism rounded-2xl p-6">
                    <div class="flex items-center justify-between mb-4">
                        <div class="w-12 h-12 rounded-full bg-green-100 flex items-center justify-center">
                            <span class="text-2xl">ğŸ’°</span>
                        </div>
                    </div>
                    <div class="text-3xl font-bold text-gray-800" id="revenue">â‚©0</div>
                    <div class="text-sm text-gray-600 mt-1">ì›” ìˆ˜ìµ</div>
                    <div class="text-xs text-green-600 mt-2">+8% ì´ë²ˆ ë‹¬</div>
                </div>

                <div class="glassmorphism rounded-2xl p-6">
                    <div class="flex items-center justify-between mb-4">
                        <div class="w-12 h-12 rounded-full bg-purple-100 flex items-center justify-center">
                            <span class="text-2xl">ğŸ’³</span>
                        </div>
                    </div>
                    <div class="text-3xl font-bold text-gray-800" id="active-subs">0</div>
                    <div class="text-sm text-gray-600 mt-1">í™œì„± êµ¬ë…</div>
                    <div class="text-xs text-green-600 mt-2">+5% ì´ë²ˆ ë‹¬</div>
                </div>

                <div class="glassmorphism rounded-2xl p-6">
                    <div class="flex items-center justify-between mb-4">
                        <div class="w-12 h-12 rounded-full bg-orange-100 flex items-center justify-center">
                            <span class="text-2xl">ğŸ“Š</span>
                        </div>
                    </div>
                    <div class="text-3xl font-bold text-gray-800" id="engagement">87%</div>
                    <div class="text-sm text-gray-600 mt-1">ì°¸ì—¬ìœ¨</div>
                    <div class="text-xs text-green-600 mt-2">+2% ì´ë²ˆ ë‹¬</div>
                </div>
            </div>

            <!-- Charts -->
            <div class="grid grid-cols-1 lg:grid-cols-2 gap-8">
                <div class="glassmorphism rounded-3xl p-6">
                    <h3 class="text-xl font-bold text-gray-800 mb-4">ì‚¬ìš©ì ì¦ê°€ ì¶”ì´</h3>
                    <canvas id="users-chart" width="400" height="200"></canvas>
                </div>
                <div class="glassmorphism rounded-3xl p-6">
                    <h3 class="text-xl font-bold text-gray-800 mb-4">ìˆ˜ìµ ì¶”ì´</h3>
                    <canvas id="revenue-chart" width="400" height="200"></canvas>
                </div>
            </div>
        </section>

        <!-- Users Section -->
        <section id="users-section" class="section hidden">
            <div class="flex items-center justify-between mb-8">
                <h2 class="text-3xl font-bold text-gray-800">ì‚¬ìš©ì ê´€ë¦¬</h2>
                <div class="flex gap-4">
                    <input type="text" id="user-search" placeholder="ì‚¬ìš©ì ê²€ìƒ‰..." 
                        class="px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500">
                    <select id="user-filter" class="px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500">
                        <option value="all">ì „ì²´</option>
                        <option value="free">ë¬´ë£Œ</option>
                        <option value="basic">ë² ì´ì§</option>
                        <option value="premium">í”„ë¦¬ë¯¸ì—„</option>
                    </select>
                </div>
            </div>

            <div class="glassmorphism rounded-3xl overflow-hidden">
                <table class="w-full">
                    <thead class="bg-gray-50 border-b border-gray-200">
                        <tr>
                            <th class="px-6 py-4 text-left text-sm font-medium text-gray-700">ì‚¬ìš©ì</th>
                            <th class="px-6 py-4 text-left text-sm font-medium text-gray-700">ì´ë©”ì¼</th>
                            <th class="px-6 py-4 text-left text-sm font-medium text-gray-700">í”Œëœ</th>
                            <th class="px-6 py-4 text-left text-sm font-medium text-gray-700">ê°€ì…ì¼</th>
                            <th class="px-6 py-4 text-left text-sm font-medium text-gray-700">ìƒíƒœ</th>
                            <th class="px-6 py-4 text-left text-sm font-medium text-gray-700">ì‘ì—…</th>
                        </tr>
                    </thead>
                    <tbody id="users-table-body" class="divide-y divide-gray-200">
                        <!-- User rows will be inserted here -->
                    </tbody>
                </table>
            </div>
        </section>

        <!-- Subscriptions Section -->
        <section id="subscriptions-section" class="section hidden">
            <h2 class="text-3xl font-bold text-gray-800 mb-8">êµ¬ë… ê´€ë¦¬</h2>
            
            <div class="grid grid-cols-1 lg:grid-cols-3 gap-8 mb-8">
                <div class="glassmorphism rounded-2xl p-6">
                    <h3 class="text-lg font-bold text-gray-800 mb-4">ë¬´ë£Œ í”Œëœ</h3>
                    <div class="text-3xl font-bold text-gray-800 mb-2" id="free-users">0</div>
                    <div class="text-sm text-gray-600">ì‚¬ìš©ì</div>
                </div>
                <div class="glassmorphism rounded-2xl p-6">
                    <h3 class="text-lg font-bold text-gray-800 mb-4">ë² ì´ì§ í”Œëœ</h3>
                    <div class="text-3xl font-bold text-gray-800 mb-2" id="basic-users">0</div>
                    <div class="text-sm text-gray-600">ì‚¬ìš©ì</div>
                    <div class="text-sm text-green-600 mt-2">â‚©0 ì›” ìˆ˜ìµ</div>
                </div>
                <div class="glassmorphism rounded-2xl p-6">
                    <h3 class="text-lg font-bold text-gray-800 mb-4">í”„ë¦¬ë¯¸ì—„ í”Œëœ</h3>
                    <div class="text-3xl font-bold text-gray-800 mb-2" id="premium-users">0</div>
                    <div class="text-sm text-gray-600">ì‚¬ìš©ì</div>
                    <div class="text-sm text-green-600 mt-2">â‚©0 ì›” ìˆ˜ìµ</div>
                </div>
            </div>

            <div class="glassmorphism rounded-3xl p-6">
                <h3 class="text-xl font-bold text-gray-800 mb-4">ìµœê·¼ êµ¬ë… í™œë™</h3>
                <div id="subscription-activity" class="space-y-3">
                    <!-- Subscription activities will be inserted here -->
                </div>
            </div>
        </section>

        <!-- Analytics Section -->
        <section id="analytics-section" class="section hidden">
            <h2 class="text-3xl font-bold text-gray-800 mb-8">ë¶„ì„</h2>
            
            <div class="grid grid-cols-1 lg:grid-cols-2 gap-8 mb-8">
                <div class="glassmorphism rounded-3xl p-6">
                    <h3 class="text-xl font-bold text-gray-800 mb-4">ì¼ì¼ í™œì„± ì‚¬ìš©ì</h3>
                    <canvas id="dau-chart" width="400" height="200"></canvas>
                </div>
                <div class="glassmorphism rounded-3xl p-6">
                    <h3 class="text-xl font-bold text-gray-800 mb-4">ê¸°ëŠ¥ë³„ ì‚¬ìš©ë¥ </h3>
                    <canvas id="feature-chart" width="400" height="200"></canvas>
                </div>
            </div>

            <div class="glassmorphism rounded-3xl p-6">
                <h3 class="text-xl font-bold text-gray-800 mb-4">í•µì‹¬ ì§€í‘œ</h3>
                <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
                    <div>
                        <div class="text-sm text-gray-600 mb-2">í‰ê·  ì„¸ì…˜ ì‹œê°„</div>
                        <div class="text-2xl font-bold text-gray-800">15ë¶„ 32ì´ˆ</div>
                    </div>
                    <div>
                        <div class="text-sm text-gray-600 mb-2">ì¼ì¼ í‰ê·  ì‘ì—… ìˆ˜</div>
                        <div class="text-2xl font-bold text-gray-800">8.5ê°œ</div>
                    </div>
                    <div>
                        <div class="text-sm text-gray-600 mb-2">ì „í™˜ìœ¨</div>
                        <div class="text-2xl font-bold text-gray-800">3.2%</div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Feedback Section -->
        <section id="feedback-section" class="section hidden">
            <h2 class="text-3xl font-bold text-gray-800 mb-8">ì‚¬ìš©ì í”¼ë“œë°±</h2>
            
            <div class="glassmorphism rounded-3xl p-6">
                <div class="flex gap-4 mb-6">
                    <select id="feedback-filter" class="px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500">
                        <option value="all">ì „ì²´</option>
                        <option value="pending">ëŒ€ê¸°ì¤‘</option>
                        <option value="reviewing">ê²€í† ì¤‘</option>
                        <option value="resolved">í•´ê²°ë¨</option>
                    </select>
                    <select id="feedback-type" class="px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500">
                        <option value="all">ëª¨ë“  ìœ í˜•</option>
                        <option value="bug">ë²„ê·¸</option>
                        <option value="feature">ê¸°ëŠ¥ ìš”ì²­</option>
                        <option value="general">ì¼ë°˜</option>
                    </select>
                </div>

                <div id="feedback-list" class="space-y-4">
                    <!-- Feedback items will be inserted here -->
                </div>
            </div>
        </section>
    </main>

    <script>
        // Check if user is admin
        async function checkAdminAuth() {
            const { data: { session } } = await supabase.auth.getSession();
            if (!session) {
                window.location.href = 'index.html';
                return;
            }
            
            // Check if user is admin
            if (!userManager.isAdmin()) {
                alert('ê´€ë¦¬ì ê¶Œí•œì´ í•„ìš”í•©ë‹ˆë‹¤.');
                window.location.href = 'dashboard.html';
                return;
            }
            
            // Load admin data
            loadAdminData();
        }

        // Load admin data
        async function loadAdminData() {
            // Update admin profile
            const profile = userManager.userProfile;
            if (profile) {
                document.getElementById('admin-name').textContent = profile.full_name || 'Admin';
                document.getElementById('admin-email').textContent = profile.email;
                if (profile.avatar_url) {
                    document.getElementById('admin-avatar').innerHTML = `<img src="${profile.avatar_url}" class="w-10 h-10 rounded-full">`;
                }
            }

            // Load dashboard data
            loadDashboardData();
            
            // Setup navigation
            setupNavigation();
        }

        // Load dashboard data
        async function loadDashboardData() {
            // Fetch users count
            const { count: usersCount } = await supabase
                .from('user_profiles')
                .select('*', { count: 'exact', head: true });
            document.getElementById('total-users').textContent = usersCount || 0;

            // Fetch subscriptions
            const { data: subscriptions } = await supabase
                .from('subscriptions')
                .select('*')
                .eq('status', 'active');
            
            const activeSubs = subscriptions?.length || 0;
            document.getElementById('active-subs').textContent = activeSubs;
            
            // Calculate revenue
            const revenue = subscriptions?.reduce((total, sub) => {
                if (sub.tier === 'basic') return total + 5900;
                if (sub.tier === 'premium') return total + 12900;
                return total;
            }, 0) || 0;
            document.getElementById('revenue').textContent = `â‚©${revenue.toLocaleString()}`;

            // Load charts
            loadCharts();
        }

        // Load charts
        function loadCharts() {
            // Users growth chart
            const usersCtx = document.getElementById('users-chart')?.getContext('2d');
            if (usersCtx) {
                new Chart(usersCtx, {
                    type: 'line',
                    data: {
                        labels: ['1ì›”', '2ì›”', '3ì›”', '4ì›”', '5ì›”', '6ì›”'],
                        datasets: [{
                            label: 'ì‚¬ìš©ì',
                            data: [100, 150, 200, 280, 350, 420],
                            borderColor: 'rgb(59, 130, 246)',
                            backgroundColor: 'rgba(59, 130, 246, 0.1)',
                            tension: 0.4
                        }]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false
                    }
                });
            }

            // Revenue chart
            const revenueCtx = document.getElementById('revenue-chart')?.getContext('2d');
            if (revenueCtx) {
                new Chart(revenueCtx, {
                    type: 'bar',
                    data: {
                        labels: ['1ì›”', '2ì›”', '3ì›”', '4ì›”', '5ì›”', '6ì›”'],
                        datasets: [{
                            label: 'ìˆ˜ìµ',
                            data: [500000, 750000, 1000000, 1400000, 1800000, 2200000],
                            backgroundColor: 'rgba(34, 197, 94, 0.8)'
                        }]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false
                    }
                });
            }
        }

        // Setup navigation
        function setupNavigation() {
            const navItems = document.querySelectorAll('.nav-item');
            const sections = document.querySelectorAll('.section');
            
            navItems.forEach(item => {
                item.addEventListener('click', (e) => {
                    e.preventDefault();
                    
                    // Update active nav
                    navItems.forEach(nav => nav.classList.remove('active'));
                    item.classList.add('active');
                    
                    // Show corresponding section
                    const targetSection = item.getAttribute('href').replace('#', '') + '-section';
                    sections.forEach(section => {
                        if (section.id === targetSection) {
                            section.classList.remove('hidden');
                            // Load section-specific data
                            if (targetSection === 'users-section') loadUsers();
                            if (targetSection === 'subscriptions-section') loadSubscriptions();
                            if (targetSection === 'analytics-section') loadAnalytics();
                            if (targetSection === 'feedback-section') loadFeedback();
                        } else {
                            section.classList.add('hidden');
                        }
                    });
                });
            });
        }

        // Load users
        async function loadUsers() {
            const { data: users } = await supabase
                .from('user_profiles')
                .select('*')
                .order('created_at', { ascending: false })
                .limit(50);
            
            const tbody = document.getElementById('users-table-body');
            tbody.innerHTML = users?.map(user => `
                <tr>
                    <td class="px-6 py-4">
                        <div class="flex items-center gap-3">
                            ${user.avatar_url ? 
                                `<img src="${user.avatar_url}" class="w-10 h-10 rounded-full">` :
                                `<div class="w-10 h-10 rounded-full bg-gray-300 flex items-center justify-center text-white font-bold">
                                    ${user.full_name?.charAt(0) || user.email?.charAt(0).toUpperCase()}
                                </div>`
                            }
                            <div>
                                <div class="font-medium text-gray-900">${user.full_name || 'ì´ë¦„ ì—†ìŒ'}</div>
                            </div>
                        </div>
                    </td>
                    <td class="px-6 py-4 text-gray-600">${user.email}</td>
                    <td class="px-6 py-4">
                        <span class="status-badge ${user.subscription_tier === 'premium' ? 'bg-purple-500' : 
                                                   user.subscription_tier === 'basic' ? 'bg-blue-500' : 
                                                   'bg-gray-400'} text-white">
                            ${user.subscription_tier === 'free' ? 'ë¬´ë£Œ' :
                              user.subscription_tier === 'basic' ? 'ë² ì´ì§' :
                              user.subscription_tier === 'premium' ? 'í”„ë¦¬ë¯¸ì—„' : 'ì—”í„°í”„ë¼ì´ì¦ˆ'}
                        </span>
                    </td>
                    <td class="px-6 py-4 text-gray-600">${new Date(user.created_at).toLocaleDateString('ko-KR')}</td>
                    <td class="px-6 py-4">
                        <span class="status-badge status-active">í™œì„±</span>
                    </td>
                    <td class="px-6 py-4">
                        <button class="text-blue-600 hover:text-blue-800 mr-3">ë³´ê¸°</button>
                        <button class="text-gray-600 hover:text-gray-800">í¸ì§‘</button>
                    </td>
                </tr>
            `).join('') || '<tr><td colspan="6" class="text-center py-8 text-gray-500">ì‚¬ìš©ìê°€ ì—†ìŠµë‹ˆë‹¤.</td></tr>';
        }

        // Load subscriptions
        async function loadSubscriptions() {
            const { data: users } = await supabase
                .from('user_profiles')
                .select('subscription_tier');
            
            const counts = {
                free: users?.filter(u => u.subscription_tier === 'free').length || 0,
                basic: users?.filter(u => u.subscription_tier === 'basic').length || 0,
                premium: users?.filter(u => u.subscription_tier === 'premium').length || 0
            };
            
            document.getElementById('free-users').textContent = counts.free;
            document.getElementById('basic-users').textContent = counts.basic;
            document.getElementById('premium-users').textContent = counts.premium;
        }

        // Load analytics
        function loadAnalytics() {
            // DAU chart
            const dauCtx = document.getElementById('dau-chart')?.getContext('2d');
            if (dauCtx) {
                new Chart(dauCtx, {
                    type: 'line',
                    data: {
                        labels: ['ì›”', 'í™”', 'ìˆ˜', 'ëª©', 'ê¸ˆ', 'í† ', 'ì¼'],
                        datasets: [{
                            label: 'DAU',
                            data: [320, 340, 310, 350, 380, 290, 310],
                            borderColor: 'rgb(168, 85, 247)',
                            backgroundColor: 'rgba(168, 85, 247, 0.1)',
                            tension: 0.4
                        }]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false
                    }
                });
            }

            // Feature usage chart
            const featureCtx = document.getElementById('feature-chart')?.getContext('2d');
            if (featureCtx) {
                new Chart(featureCtx, {
                    type: 'doughnut',
                    data: {
                        labels: ['ì²´í¬ë¦¬ìŠ¤íŠ¸', 'ë§ˆì¸ë“œë§µ', 'ë™ê¸°í™”', 'ê³µìœ '],
                        datasets: [{
                            data: [45, 30, 20, 5],
                            backgroundColor: [
                                'rgb(59, 130, 246)',
                                'rgb(168, 85, 247)',
                                'rgb(236, 72, 153)',
                                'rgb(251, 191, 36)'
                            ]
                        }]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false
                    }
                });
            }
        }

        // Load feedback
        async function loadFeedback() {
            const { data: feedback } = await supabase
                .from('feedback')
                .select('*')
                .order('created_at', { ascending: false })
                .limit(20);
            
            const feedbackList = document.getElementById('feedback-list');
            feedbackList.innerHTML = feedback?.map(item => `
                <div class="bg-white rounded-xl p-4 border border-gray-200">
                    <div class="flex items-center justify-between mb-2">
                        <span class="text-sm font-medium text-gray-900">
                            ${item.type === 'bug' ? 'ğŸ› ë²„ê·¸' :
                              item.type === 'feature' ? 'âœ¨ ê¸°ëŠ¥ ìš”ì²­' :
                              item.type === 'general' ? 'ğŸ’¬ ì¼ë°˜' : 'âš ï¸ ë¶ˆë§Œ'}
                        </span>
                        <span class="status-badge ${item.status === 'resolved' ? 'bg-green-500' :
                                                    item.status === 'reviewing' ? 'bg-yellow-500' :
                                                    'bg-gray-400'} text-white">
                            ${item.status === 'pending' ? 'ëŒ€ê¸°ì¤‘' :
                              item.status === 'reviewing' ? 'ê²€í† ì¤‘' :
                              item.status === 'resolved' ? 'í•´ê²°ë¨' : 'ë‹«í˜'}
                        </span>
                    </div>
                    <p class="text-gray-700 mb-2">${item.message}</p>
                    <div class="text-xs text-gray-500">
                        ${new Date(item.created_at).toLocaleString('ko-KR')}
                    </div>
                    ${item.response ? `
                        <div class="mt-3 pt-3 border-t border-gray-200">
                            <div class="text-sm text-gray-600">ë‹µë³€:</div>
                            <p class="text-sm text-gray-700">${item.response}</p>
                        </div>
                    ` : ''}
                </div>
            `).join('') || '<div class="text-center py-8 text-gray-500">í”¼ë“œë°±ì´ ì—†ìŠµë‹ˆë‹¤.</div>';
        }

        // Sign out
        async function signOut() {
            await userManager.signOut();
            window.location.href = 'index.html';
        }

        // Initialize
        checkAdminAuth();
    </script>
</body>
</html>